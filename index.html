<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Visit & Earn - Earn Money Visiting Websites</title>
    
    <!-- Firebase SDK v9 -->
    <script type="module">
        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyBtqQvDCgqy5Tp01yajerWRSMfW6MKx-Gc",
            authDomain: "visit-1f400.firebaseapp.com",
            projectId: "visit-1f400",
            storageBucket: "visit-1f400.firebasestorage.app",
            messagingSenderId: "226827389556",
            appId: "1:226827389556:web:b5c04719721212bc79df21"
        };

        // Firebase Imports
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
        import { 
            getFirestore, 
            doc, 
            getDoc, 
            updateDoc, 
            collection, 
            query, 
            where, 
            addDoc, 
            setDoc,
            serverTimestamp,
            increment,
            onSnapshot,
            arrayUnion,
            orderBy,
            getDocs
        } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js";

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // Telegram Web App initialization
        let tg = window.Telegram.WebApp;

        // Global variables
        let userData = null;
        let appConfig = null;
        let websites = [];
        let visitedSites = [];
        let withdrawalMethods = [];
        let currentTimer = null;
        let timerSeconds = 0;
        let currentWebsite = null;
        let currentBalance = 0;
        let totalEarned = 0;
        let telegramUser = null;
        let visitUrlWindow = null;
        let withdrawalHistory = [];
        let isOnline = navigator.onLine;
        let firebaseConnected = false;

        // Local Storage Keys
        const STORAGE_KEYS = {
            USER_DATA: 'visit_earn_user_data',
            BALANCE: 'visit_earn_balance',
            TOTAL_EARNED: 'visit_earn_total_earned',
            VISITED_SITES: 'visit_earn_visited_sites',
            WITHDRAWAL_HISTORY: 'visit_earn_withdrawal_history',
            EARNING_HISTORY: 'visit_earn_earning_history',
            USER_ID: 'visit_earn_user_id',
            LAST_SYNC: 'visit_earn_last_sync',
            OFFLINE_EARNINGS: 'visit_earn_offline_earnings'
        };

        // Initialize on load
        window.onload = async () => {
            console.log("üöÄ Visit & Earn App Loading...");
            
            // Initialize Telegram Web App
            tg.expand();
            tg.ready();
            tg.enableClosingConfirmation();
            
            // Get user from Telegram
            telegramUser = tg.initDataUnsafe.user;
            
            if (!telegramUser) {
                console.error("No Telegram user data available");
                showToast("Telegram user data not found. Using guest mode.", "warning");
                
                // Create guest user
                telegramUser = {
                    id: "guest_" + Date.now(),
                    first_name: "Guest",
                    last_name: "User"
                };
            }
            
            console.log("Telegram User ID:", telegramUser.id);
            
            // Setup event listeners
            setupEventListeners();
            
            // Show loading screen with connection status
            updateConnectionStatus();
            
            // Try to load from local storage first (instant load)
            const loadedFromStorage = loadFromLocalStorage();
            
            if (loadedFromStorage) {
                console.log("‚úÖ Loaded from local storage");
                showMainApp(); // Show app immediately
            }
            
            // Initialize user with Telegram data
            await initializeUser(telegramUser);
            
            // Load app config
            await loadAppConfig();
            
            // Setup real-time listeners
            setupFirebaseListeners();
        };

        // ===== CONNECTION MANAGEMENT =====
        function updateConnectionStatus() {
            const statusEl = document.getElementById('connection-status');
            if (!statusEl) return;
            
            if (isOnline && firebaseConnected) {
                statusEl.innerHTML = '<span class="text-green-500"><i class="fas fa-wifi mr-1"></i>Online</span>';
            } else if (isOnline && !firebaseConnected) {
                statusEl.innerHTML = '<span class="text-yellow-500"><i class="fas fa-wifi mr-1"></i>Connecting...</span>';
            } else {
                statusEl.innerHTML = '<span class="text-red-500"><i class="fas fa-wifi-slash mr-1"></i>Offline</span>';
            }
        }

        async function checkFirebaseConnection() {
            try {
                // Try to read from Firestore
                const testDoc = await getDoc(doc(db, "config", "main"));
                firebaseConnected = true;
                console.log("‚úÖ Firebase connection successful");
                return true;
            } catch (error) {
                firebaseConnected = false;
                console.error("‚ùå Firebase connection failed:", error);
                return false;
            }
        }

        // ===== LOCAL STORAGE FUNCTIONS =====
        function saveToLocalStorage() {
            try {
                const userDataToSave = {
                    firstName: userData?.firstName || telegramUser?.first_name || 'User',
                    lastName: userData?.lastName || telegramUser?.last_name || '',
                    username: userData?.username || telegramUser?.username || '',
                    balance: currentBalance,
                    totalEarned: totalEarned,
                    uid: userData?.uid || telegramUser?.id,
                    telegramId: telegramUser?.id,
                    visitedSites: visitedSites,
                    lastSync: Date.now(),
                    isGuest: !telegramUser?.id?.toString().startsWith('guest_') ? false : true
                };
                
                localStorage.setItem(STORAGE_KEYS.USER_DATA, JSON.stringify(userDataToSave));
                localStorage.setItem(STORAGE_KEYS.BALANCE, currentBalance.toString());
                localStorage.setItem(STORAGE_KEYS.TOTAL_EARNED, totalEarned.toString());
                localStorage.setItem(STORAGE_KEYS.VISITED_SITES, JSON.stringify(visitedSites));
                localStorage.setItem(STORAGE_KEYS.WITHDRAWAL_HISTORY, JSON.stringify(withdrawalHistory));
                localStorage.setItem(STORAGE_KEYS.USER_ID, telegramUser?.id?.toString() || '');
                
                console.log("üíæ Saved to local storage:", {
                    balance: currentBalance,
                    totalEarned: totalEarned,
                    visitedSites: visitedSites.length
                });
                
                return true;
            } catch (error) {
                console.error("‚ùå Error saving to local storage:", error);
                return false;
            }
        }

        function loadFromLocalStorage() {
            try {
                // Check if we have saved user data
                const savedUserId = localStorage.getItem(STORAGE_KEYS.USER_ID);
                const savedUserData = localStorage.getItem(STORAGE_KEYS.USER_DATA);
                
                if (!savedUserId || !savedUserData) {
                    console.log("üì≠ No saved data in local storage");
                    return false;
                }
                
                // Parse saved data
                const parsedData = JSON.parse(savedUserData);
                
                // Only load if it's the same user
                if (parsedData.telegramId === telegramUser?.id?.toString() || parsedData.isGuest) {
                    userData = parsedData;
                    currentBalance = parseInt(localStorage.getItem(STORAGE_KEYS.BALANCE)) || 0;
                    totalEarned = parseInt(localStorage.getItem(STORAGE_KEYS.TOTAL_EARNED)) || 0;
                    
                    // Load visited sites
                    const savedVisited = localStorage.getItem(STORAGE_KEYS.VISITED_SITES);
                    visitedSites = savedVisited ? JSON.parse(savedVisited) : [];
                    
                    // Load withdrawal history
                    const savedWithdrawals = localStorage.getItem(STORAGE_KEYS.WITHDRAWAL_HISTORY);
                    withdrawalHistory = savedWithdrawals ? JSON.parse(savedWithdrawals) : [];
                    
                    console.log("üì• Loaded from local storage:", {
                        name: userData.firstName,
                        balance: currentBalance,
                        totalEarned: totalEarned
                    });
                    
                    // Update UI
                    updateUserUI();
                    loadWebsites();
                    
                    return true;
                }
            } catch (error) {
                console.error("‚ùå Error loading from local storage:", error);
            }
            return false;
        }

        function clearLocalStorage() {
            try {
                Object.values(STORAGE_KEYS).forEach(key => {
                    localStorage.removeItem(key);
                });
                console.log("üßπ Local storage cleared");
            } catch (error) {
                console.error("‚ùå Error clearing local storage:", error);
            }
        }

        // ===== USER MANAGEMENT =====
        async function initializeUser(telegramUser) {
            showLoading();
            
            try {
                const userId = telegramUser.id.toString();
                console.log("üîç Initializing user:", userId);
                
                // Check Firebase connection first
                const isConnected = await checkFirebaseConnection();
                
                if (!isConnected) {
                    console.log("üåê No Firebase connection, using local storage only");
                    showToast("Working offline. Data saved locally.", "warning");
                    
                    // Create local user if not exists
                    if (!userData) {
                        await createLocalUser(telegramUser);
                    }
                    
                    hideLoading();
                    return;
                }
                
                // Try to get user from Firebase
                const userRef = doc(db, "users", userId);
                const userDoc = await getDoc(userRef);
                
                if (!userDoc.exists()) {
                    console.log("üë§ User not found in Firebase, creating new user");
                    await createNewUser(telegramUser);
                } else {
                    console.log("üë§ User found in Firebase, loading data");
                    userData = userDoc.data();
                    
                    // Update with Telegram profile data
                    await updateTelegramProfileData(telegramUser);
                    
                    // Load data from Firebase
                    currentBalance = userData.balance || 0;
                    totalEarned = userData.totalEarned || 0;
                    visitedSites = userData.visitedSitesToday || [];
                    
                    // Merge with local storage (keep higher values)
                    const localBalance = parseInt(localStorage.getItem(STORAGE_KEYS.BALANCE)) || 0;
                    if (localBalance > currentBalance) {
                        currentBalance = localBalance;
                        console.log("üîÑ Using local balance (higher):", currentBalance);
                    }
                    
                    // Check daily reset
                    await checkDailyReset();
                    
                    // Save to local storage
                    saveToLocalStorage();
                    
                    // Update UI
                    updateUserUI();
                    showToast(`Welcome back, ${userData.firstName}!`, 'success');
                }
                
            } catch (error) {
                console.error('‚ùå Error initializing user:', error);
                
                // Fallback to local storage
                if (!userData) {
                    await createLocalUser(telegramUser);
                    showToast("Using local data due to connection issues", "warning");
                } else {
                    showToast("Connection issue, using saved data", "warning");
                }
            }
            
            hideLoading();
        }

        async function createNewUser(telegramUser) {
            try {
                const userId = telegramUser.id.toString();
                
                console.log("üë§ Creating new user in Firebase:", userId);
                
                // Create user document with Telegram data
                userData = {
                    uid: userId,
                    telegramId: userId,
                    firstName: telegramUser.first_name || 'User',
                    lastName: telegramUser.last_name || '',
                    username: telegramUser.username || '',
                    photoUrl: telegramUser.photo_url || '',
                    languageCode: telegramUser.language_code || 'en',
                    
                    // App data
                    balance: 100, // Starting bonus
                    totalEarned: 100,
                    visitedSitesToday: [],
                    lastSiteVisitDate: new Date().toISOString().split('T')[0],
                    referrals: [],
                    totalReferrals: 0,
                    referralEarnings: 0,
                    withdrawalHistory: [],
                    earningHistory: [],
                    lastActive: serverTimestamp(),
                    createdAt: serverTimestamp(),
                    updatedAt: serverTimestamp()
                };
                
                // Save to Firebase
                await setDoc(doc(db, "users", userId), userData);
                
                // Update local variables
                currentBalance = 100;
                totalEarned = 100;
                visitedSites = [];
                
                // Save to local storage
                saveToLocalStorage();
                
                // Update UI
                updateUserUI();
                
                showToast('Welcome! 100 bonus coins added! üéâ', 'success');
                console.log("‚úÖ New user created successfully");
                
            } catch (error) {
                console.error('‚ùå Error creating user in Firebase:', error);
                throw error; // Propagate error to fallback
            }
        }

        async function createLocalUser(telegramUser) {
            console.log("üë§ Creating local user (offline mode)");
            
            userData = {
                uid: telegramUser.id.toString(),
                telegramId: telegramUser.id.toString(),
                firstName: telegramUser.first_name || 'User',
                lastName: telegramUser.last_name || '',
                username: telegramUser.username || '',
                balance: 100,
                totalEarned: 100,
                visitedSitesToday: [],
                isGuest: telegramUser.id.toString().startsWith('guest_')
            };
            
            currentBalance = 100;
            totalEarned = 100;
            visitedSites = [];
            
            // Save to local storage
            saveToLocalStorage();
            
            // Update UI
            updateUserUI();
            
            showToast('Welcome to Visit & Earn! (Offline Mode)', 'success');
        }

        async function updateTelegramProfileData(telegramUser) {
            try {
                if (!userData?.uid) return;
                
                const updates = {};
                const userId = telegramUser.id.toString();
                
                // Only update if different
                if (userData.firstName !== telegramUser.first_name) {
                    updates.firstName = telegramUser.first_name || '';
                }
                if (userData.lastName !== (telegramUser.last_name || '')) {
                    updates.lastName = telegramUser.last_name || '';
                }
                if (userData.username !== (telegramUser.username || '')) {
                    updates.username = telegramUser.username || '';
                }
                if (userData.photoUrl !== (telegramUser.photo_url || '')) {
                    updates.photoUrl = telegramUser.photo_url || '';
                }
                
                if (Object.keys(updates).length > 0) {
                    updates.updatedAt = serverTimestamp();
                    await updateDoc(doc(db, "users", userId), updates);
                    console.log("‚úÖ Updated Telegram profile data");
                }
                
            } catch (error) {
                console.error('‚ùå Error updating profile:', error);
            }
        }

        async function checkDailyReset() {
            try {
                if (!userData?.uid) return;
                
                const today = new Date().toISOString().split('T')[0];
                const lastVisitDate = userData.lastSiteVisitDate || today;
                
                if (lastVisitDate !== today) {
                    console.log("üîÑ Performing daily reset");
                    visitedSites = [];
                    
                    await updateDoc(doc(db, "users", userData.uid), {
                        visitedSitesToday: [],
                        lastSiteVisitDate: today,
                        lastActive: serverTimestamp()
                    });
                    
                    // Update local storage
                    saveToLocalStorage();
                }
            } catch (error) {
                console.error('‚ùå Error in daily reset:', error);
            }
        }

        // ===== APP CONFIG =====
        async function loadAppConfig() {
            try {
                // Check connection first
                if (!firebaseConnected) {
                    console.log("üåê No connection, using default config");
                    loadDefaultConfig();
                    return;
                }
                
                const configDoc = await getDoc(doc(db, "config", "main"));
                
                if (configDoc.exists()) {
                    appConfig = configDoc.data();
                    websites = appConfig.websitesToVisit || [];
                    withdrawalMethods = appConfig.paymentMethods || ['bKash', 'Nagad', 'UPI', 'Paytm', 'PayPal'];
                    
                    console.log("‚úÖ Loaded app config from Firebase");
                    
                } else {
                    console.log("üìù No config in Firebase, using defaults");
                    loadDefaultConfig();
                }
                
                updateConfigUI();
                loadWebsites();
                
            } catch (error) {
                console.error('‚ùå Error loading app config:', error);
                loadDefaultConfig();
                showToast('Using default websites', 'info');
            }
        }

        function loadDefaultConfig() {
            websites = [
                { name: "Google", link: "https://www.google.com", reward: 10, timer: 30 },
                { name: "YouTube", link: "https://www.youtube.com", reward: 15, timer: 45 },
                { name: "Wikipedia", link: "https://www.wikipedia.org", reward: 12, timer: 40 },
                { name: "GitHub", link: "https://www.github.com", reward: 8, timer: 35 },
                { name: "StackOverflow", link: "https://www.stackoverflow.com", reward: 10, timer: 40 }
            ];
            withdrawalMethods = ['bKash', 'Nagad', 'UPI', 'Paytm', 'PayPal'];
            appConfig = {
                minWithdrawal: 1000,
                coinValueCoins: 1000,
                coinValueInr: 10
            };
        }

        function updateConfigUI() {
            const minWithdrawal = appConfig?.minWithdrawal || 1000;
            document.getElementById('min-withdrawal').textContent = minWithdrawal.toLocaleString();
            document.getElementById('min-withdraw-amount').textContent = minWithdrawal.toLocaleString();
            document.getElementById('min-withdraw-modal').textContent = minWithdrawal.toLocaleString();
            
            const coins = appConfig?.coinValueCoins || 1000;
            const inr = appConfig?.coinValueInr || 10;
            document.getElementById('coins-value').textContent = `${coins} coins = ‚Çπ${inr}`;
            
            // Update website count
            document.getElementById('total-websites').textContent = websites.length;
            if (document.getElementById('visited-count')) {
                document.getElementById('visited-count').textContent = visitedSites.length;
            }
        }

        function updateUserUI() {
            if (userData) {
                document.getElementById('user-name').textContent = userData.firstName || 'User';
                document.getElementById('user-balance').textContent = currentBalance.toLocaleString();
                document.getElementById('withdraw-balance').textContent = currentBalance.toLocaleString() + ' coins';
                document.getElementById('total-earned').textContent = totalEarned.toLocaleString();
                document.getElementById('daily-progress').textContent = `${visitedSites.length}/${websites.length}`;
                document.getElementById('withdraw-max').textContent = currentBalance.toLocaleString();
                document.getElementById('total-referrals').textContent = userData.totalReferrals || 0;
                document.getElementById('referral-earnings').textContent = (userData.referralEarnings || 0).toLocaleString() + ' coins';
                
                // Update progress bar
                if (websites.length > 0) {
                    const progress = (visitedSites.length / websites.length) * 100;
                    document.getElementById('daily-progress-bar').style.width = `${progress}%`;
                }
                
                // Update user avatar
                const userAvatar = document.getElementById('user-avatar');
                if (userData.photoUrl) {
                    userAvatar.innerHTML = `<img src="${userData.photoUrl}" alt="${userData.firstName}" class="w-full h-full rounded-full object-cover">`;
                } else {
                    const initials = (userData.firstName?.charAt(0) || 'U').toUpperCase();
                    userAvatar.innerHTML = `<span class="text-lg font-bold">${initials}</span>`;
                }
                
                // Update referral link
                const refCode = userData.uid || telegramUser?.id || 'demo';
                const referralLink = `https://t.me/share/url?url=${encodeURIComponent(window.location.href)}?ref=${refCode}&text=Join Visit & Earn to make money by visiting websites! üöÄ`;
                if (document.getElementById('referral-link')) {
                    document.getElementById('referral-link').value = referralLink;
                }
            }
        }

        // ===== WEBSITES =====
        function loadWebsites() {
            const container = document.getElementById('websites-container');
            if (!container) return;
            
            if (!websites || websites.length === 0) {
                container.innerHTML = `
                    <div class="no-websites">
                        <i class="fas fa-globe text-4xl text-gray-400 mb-4"></i>
                        <p class="text-gray-400">No websites available</p>
                        <p class="text-sm text-gray-500 mt-2">Check back later</p>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = '';
            
            websites.forEach((website, index) => {
                const isVisited = visitedSites.includes(index);
                const card = document.createElement('div');
                card.className = `website-card ${isVisited ? 'visited' : ''}`;
                
                let displayUrl = website.link || '';
                displayUrl = displayUrl.replace('https://', '').replace('http://', '').replace('www.', '');
                if (displayUrl.length > 30) displayUrl = displayUrl.substring(0, 27) + '...';
                
                card.innerHTML = `
                    <div class="website-icon">
                        <i class="fas fa-globe"></i>
                    </div>
                    <div class="website-info">
                        <h3 class="website-name">${website.name || 'Website'}</h3>
                        <p class="website-url">${displayUrl}</p>
                        <div class="website-rewards">
                            <span class="reward-amount">
                                <i class="fas fa-coins"></i> ${website.reward || 10} coins
                            </span>
                            <span class="timer">
                                <i class="fas fa-clock"></i> ${website.timer || 30}s
                            </span>
                        </div>
                    </div>
                    <div class="website-action">
                        ${isVisited ? 
                            `<button class="btn-visited" disabled>
                                <i class="fas fa-check-circle"></i> Visited
                            </button>` : 
                            `<button class="btn-visit" onclick="visitWebsite(${index})">
                                <i class="fas fa-play"></i> Visit
                            </button>`
                        }
                    </div>
                `;
                
                container.appendChild(card);
            });
            
            // Update visited count
            if (document.getElementById('visited-count')) {
                document.getElementById('visited-count').textContent = visitedSites.length;
            }
        }

        async function visitWebsite(index) {
            console.log("üåê Visit website:", index);
            
            if (!userData) {
                showToast("Please wait, loading user data...", "warning");
                return;
            }
            
            if (index < 0 || index >= websites.length) {
                showToast("Invalid website", "error");
                return;
            }
            
            const website = websites[index];
            if (!website || !website.link) {
                showToast("Website data error", "error");
                return;
            }
            
            if (visitedSites.includes(index)) {
                showToast('Already visited today', 'warning');
                return;
            }
            
            currentWebsite = website;
            timerSeconds = website.timer || 30;
            
            showVisitModal();
            startVisitTimer();
            openWebsiteWindow(website.link);
        }

        function openWebsiteWindow(url) {
            try {
                let formattedUrl = url;
                if (!formattedUrl.startsWith('http://') && !formattedUrl.startsWith('https://')) {
                    formattedUrl = 'https://' + formattedUrl;
                }
                
                console.log("üîó Opening:", formattedUrl);
                
                // Try to open in new window
                visitUrlWindow = window.open(formattedUrl, '_blank', 'noopener,noreferrer');
                
                if (!visitUrlWindow || visitUrlWindow.closed) {
                    console.log("‚ö†Ô∏è Popup blocked, trying alternative method");
                    // Alternative: Open in same window
                    window.open(formattedUrl, '_blank');
                }
                
            } catch (error) {
                console.error('‚ùå Error opening website:', error);
                showToast('Website will open in new tab', 'info');
            }
        }

        function showVisitModal() {
            if (!currentWebsite) return;
            
            document.getElementById('visit-website-name').textContent = currentWebsite.name || 'Website';
            document.getElementById('visit-website-url').textContent = currentWebsite.link || '';
            document.getElementById('visit-timer').textContent = timerSeconds;
            document.getElementById('visit-reward').textContent = currentWebsite.reward || 10;
            document.getElementById('earned-amount').textContent = (currentWebsite.reward || 10) + ' coins';
            
            document.getElementById('visit-modal').classList.remove('hidden');
            document.getElementById('main-content').classList.add('hidden');
        }

        function startVisitTimer() {
            updateTimerDisplay();
            
            currentTimer = setInterval(() => {
                timerSeconds--;
                updateTimerDisplay();
                
                if (timerSeconds <= 0) {
                    completeVisit();
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const timerElement = document.getElementById('visit-timer');
            const progressElement = document.getElementById('timer-progress');
            const percentageElement = document.getElementById('timer-percentage');
            
            if (timerElement) timerElement.textContent = timerSeconds;
            
            const totalTime = currentWebsite.timer || 30;
            const progress = ((totalTime - timerSeconds) / totalTime) * 100;
            
            if (progressElement) progressElement.style.width = `${progress}%`;
            if (percentageElement) percentageElement.textContent = `${Math.round(progress)}%`;
        }

        async function completeVisit() {
            if (currentTimer) {
                clearInterval(currentTimer);
                currentTimer = null;
            }
            
            if (visitUrlWindow && !visitUrlWindow.closed) {
                try {
                    visitUrlWindow.close();
                } catch (e) {}
            }
            
            if (!currentWebsite || !userData) return;
            
            const websiteIndex = websites.indexOf(currentWebsite);
            if (websiteIndex === -1) return;
            
            visitedSites.push(websiteIndex);
            const reward = currentWebsite.reward || 10;
            currentBalance += reward;
            totalEarned += reward;
            
            console.log("üí∞ Earned coins:", reward, "Total:", currentBalance);
            
            // Save to local storage IMMEDIATELY
            saveToLocalStorage();
            
            // Try to save to Firebase
            if (userData.uid && firebaseConnected) {
                try {
                    await updateDoc(doc(db, "users", userData.uid), {
                        balance: increment(reward),
                        totalEarned: increment(reward),
                        visitedSitesToday: arrayUnion(websiteIndex),
                        updatedAt: serverTimestamp(),
                        lastActive: serverTimestamp()
                    });
                    console.log("‚úÖ Saved to Firebase");
                } catch (error) {
                    console.error('‚ùå Error saving to Firebase:', error);
                    // Keep working offline
                }
            }
            
            // Update UI
            updateUserUI();
            loadWebsites();
            
            // Show success message
            document.getElementById('visit-success').classList.remove('hidden');
            document.getElementById('visit-in-progress').classList.add('hidden');
            
            setTimeout(() => {
                closeVisitModal();
                showToast(`üéâ +${reward} coins earned!`, 'success');
            }, 2000);
        }

        function closeVisitModal() {
            if (currentTimer) {
                clearInterval(currentTimer);
                currentTimer = null;
            }
            
            if (visitUrlWindow && !visitUrlWindow.closed) {
                try {
                    visitUrlWindow.close();
                } catch (e) {}
            }
            
            document.getElementById('visit-modal').classList.add('hidden');
            document.getElementById('main-content').classList.remove('hidden');
            document.getElementById('visit-success').classList.add('hidden');
            document.getElementById('visit-in-progress').classList.remove('hidden');
            
            currentWebsite = null;
            timerSeconds = 0;
            visitUrlWindow = null;
        }

        // ===== WITHDRAWAL =====
        async function showWithdrawalModal() {
            const minWithdrawal = appConfig?.minWithdrawal || 1000;
            
            if (currentBalance < minWithdrawal) {
                showToast(`Need ${minWithdrawal} coins to withdraw. You have ${currentBalance}.`, 'warning');
                return;
            }
            
            // Load methods
            const methodsContainer = document.getElementById('withdrawal-methods');
            if (methodsContainer) {
                methodsContainer.innerHTML = '';
                
                const methods = withdrawalMethods || ['bKash', 'Nagad', 'UPI', 'Paytm', 'PayPal'];
                methods.forEach(method => {
                    const methodEl = document.createElement('div');
                    methodEl.className = 'withdrawal-method';
                    methodEl.onclick = () => selectWithdrawalMethod(method);
                    methodEl.innerHTML = `
                        <div class="method-icon">
                            ${getMethodIcon(method)}
                        </div>
                        <div class="method-info">
                            <h4>${method}</h4>
                            <p class="method-desc">${getMethodDescription(method)}</p>
                        </div>
                        <div class="method-select">
                            <input type="radio" name="withdrawal-method" value="${method.toLowerCase()}">
                        </div>
                    `;
                    methodsContainer.appendChild(methodEl);
                });
            }
            
            document.getElementById('withdraw-amount').max = currentBalance;
            document.getElementById('withdraw-amount').value = Math.min(minWithdrawal, currentBalance);
            document.getElementById('withdraw-max').textContent = currentBalance.toLocaleString();
            
            updateWithdrawalValue();
            document.getElementById('withdrawal-modal').classList.remove('hidden');
        }

        function selectWithdrawalMethod(method) {
            document.querySelectorAll('input[name="withdrawal-method"]').forEach(radio => {
                radio.checked = radio.value === method.toLowerCase();
            });
            
            document.querySelectorAll('.withdrawal-method').forEach(el => {
                el.classList.remove('selected');
            });
            
            const selectedMethod = Array.from(document.querySelectorAll('.withdrawal-method'))
                .find(el => el.querySelector('input').value === method.toLowerCase());
            
            if (selectedMethod) selectedMethod.classList.add('selected');
        }

        function getMethodIcon(method) {
            const icons = {
                'bKash': 'fas fa-mobile-alt',
                'Nagad': 'fas fa-money-bill-wave',
                'UPI': 'fas fa-university',
                'Paytm': 'fas fa-rupee-sign',
                'PayPal': 'fas fa-credit-card'
            };
            return `<i class="${icons[method] || 'fas fa-wallet'}"></i>`;
        }

        function getMethodDescription(method) {
            const descs = {
                'bKash': 'Mobile banking',
                'Nagad': 'Mobile financial service',
                'UPI': 'Unified Payments Interface',
                'Paytm': 'Digital wallet & payments',
                'PayPal': 'International payments'
            };
            return descs[method] || 'Digital payment';
        }

        function updateWithdrawalValue() {
            const amount = parseInt(document.getElementById('withdraw-amount').value) || 0;
            const coins = appConfig?.coinValueCoins || 1000;
            const inr = appConfig?.coinValueInr || 10;
            const value = (amount / coins) * inr;
            document.getElementById('estimated-value').textContent = `‚Çπ${value.toFixed(2)}`;
        }

        async function submitWithdrawal() {
            const amount = parseInt(document.getElementById('withdraw-amount').value) || 0;
            const method = document.querySelector('input[name="withdrawal-method"]:checked')?.value;
            const details = document.getElementById('payment-details').value.trim();
            
            const minWithdrawal = appConfig?.minWithdrawal || 1000;
            
            if (amount < minWithdrawal) {
                showToast(`Minimum withdrawal is ${minWithdrawal.toLocaleString()} coins`, 'warning');
                return;
            }
            
            if (amount > currentBalance) {
                showToast('Insufficient balance', 'error');
                return;
            }
            
            if (!method) {
                showToast('Select payment method', 'warning');
                return;
            }
            
            if (!details) {
                showToast('Enter payment details', 'warning');
                return;
            }
            
            showLoading();
            
            try {
                // Update local balance immediately
                currentBalance -= amount;
                saveToLocalStorage();
                updateUserUI();
                
                // Create withdrawal record
                const withdrawalData = {
                    userId: userData?.uid || telegramUser?.id,
                    telegramId: telegramUser?.id,
                    userName: userData?.firstName || 'User',
                    telegramUsername: userData?.username || '',
                    userPhotoUrl: userData?.photoUrl || '',
                    amount: amount,
                    method: method,
                    paymentDetail: details,
                    status: 'pending',
                    requestedAt: new Date().toISOString()
                };
                
                // Add to local history
                withdrawalHistory.unshift(withdrawalData);
                saveToLocalStorage();
                
                // Try to save to Firebase if connected
                if (firebaseConnected && userData?.uid) {
                    try {
                        await addDoc(collection(db, "withdrawals"), {
                            ...withdrawalData,
                            requestedAt: serverTimestamp()
                        });
                        
                        // Update user balance in Firebase
                        await updateDoc(doc(db, "users", userData.uid), {
                            balance: increment(-amount),
                            updatedAt: serverTimestamp()
                        });
                    } catch (firebaseError) {
                        console.error("‚ùå Firebase error:", firebaseError);
                        // Continue with local only
                    }
                }
                
                closeWithdrawalModal();
                showToast('Withdrawal request submitted!', 'success');
                showWithdrawalConfirmation(amount, method);
                
                // Update UI
                if (!document.getElementById('withdraw-section').classList.contains('hidden') || 
                    !document.getElementById('history-section').classList.contains('hidden')) {
                    updateWithdrawalsUI();
                }
                
            } catch (error) {
                console.error('‚ùå Error submitting withdrawal:', error);
                showToast('Error submitting request', 'error');
            }
            
            hideLoading();
        }

        function updateWithdrawalsUI() {
            const tbody = document.getElementById('withdrawals-list');
            const recentTbody = document.getElementById('recent-withdrawals');
            
            if (!tbody && !recentTbody) return;
            
            if (!withdrawalHistory || withdrawalHistory.length === 0) {
                if (tbody) {
                    tbody.innerHTML = `
                        <tr>
                            <td colspan="4" class="text-center py-8 text-gray-400">
                                <i class="fas fa-wallet text-2xl mb-2"></i>
                                <p>No withdrawals yet</p>
                            </td>
                        </tr>
                    `;
                }
                
                if (recentTbody) {
                    recentTbody.innerHTML = `
                        <div class="text-center py-8 text-gray-400">
                            <i class="fas fa-wallet text-2xl mb-2"></i>
                            <p>No withdrawals yet</p>
                        </div>
                    `;
                }
                return;
            }
            
            if (tbody) {
                tbody.innerHTML = '';
                withdrawalHistory.forEach((data) => {
                    const date = data.requestedAt ? new Date(data.requestedAt).toLocaleDateString() : 'N/A';
                    
                    let statusBadge = '';
                    if (data.status === 'approved') {
                        statusBadge = '<span class="status-badge approved">Approved</span>';
                    } else if (data.status === 'rejected') {
                        statusBadge = '<span class="status-badge rejected">Rejected</span>';
                    } else {
                        statusBadge = '<span class="status-badge pending">Pending</span>';
                    }
                    
                    tbody.innerHTML += `
                        <tr>
                            <td class="py-3">${data.amount?.toLocaleString() || '0'} coins</td>
                            <td class="py-3">${(data.method || '').toUpperCase()}</td>
                            <td class="py-3">${statusBadge}</td>
                            <td class="py-3">${date}</td>
                        </tr>
                    `;
                });
            }
            
            if (recentTbody) {
                recentTbody.innerHTML = '';
                withdrawalHistory.slice(0, 3).forEach((data) => {
                    const date = data.requestedAt ? new Date(data.requestedAt).toLocaleDateString() : 'N/A';
                    
                    let statusBadge = '';
                    if (data.status === 'approved') {
                        statusBadge = '<span class="status-badge approved">Approved</span>';
                    } else if (data.status === 'rejected') {
                        statusBadge = '<span class="status-badge rejected">Rejected</span>';
                    } else {
                        statusBadge = '<span class="status-badge pending">Pending</span>';
                    }
                    
                    recentTbody.innerHTML += `
                        <div class="flex justify-between items-center p-3 bg-white rounded-lg mb-2">
                            <div>
                                <p class="font-semibold">${data.amount?.toLocaleString() || '0'} coins</p>
                                <p class="text-sm text-gray-600">${(data.method || '').toUpperCase()}</p>
                            </div>
                            <div>
                                ${statusBadge}
                                <p class="text-xs text-gray-500 mt-1">${date}</p>
                            </div>
                        </div>
                    `;
                });
            }
        }

        function showWithdrawalConfirmation(amount, method) {
            document.getElementById('confirmation-amount').textContent = amount.toLocaleString();
            document.getElementById('confirmation-method').textContent = method.toUpperCase();
            document.getElementById('withdrawal-confirmation').classList.remove('hidden');
        }

        function closeWithdrawalModal() {
            document.getElementById('withdrawal-modal').classList.add('hidden');
            document.getElementById('payment-details').value = '';
            document.querySelectorAll('.withdrawal-method').forEach(el => {
                el.classList.remove('selected');
            });
            document.querySelectorAll('input[name="withdrawal-method"]').forEach(radio => {
                radio.checked = false;
            });
        }

        async function loadUserWithdrawals() {
            // First load from local storage
            updateWithdrawalsUI();
            
            // Then try to sync with Firebase if connected
            if (firebaseConnected && userData?.telegramId) {
                try {
                    const withdrawalsQuery = query(
                        collection(db, "withdrawals"),
                        where("telegramId", "==", userData.telegramId),
                        orderBy("requestedAt", "desc")
                    );
                    
                    const snapshot = await getDocs(withdrawalsQuery);
                    if (!snapshot.empty) {
                        withdrawalHistory = [];
                        snapshot.forEach(doc => {
                            withdrawalHistory.push({ id: doc.id, ...doc.data() });
                        });
                        
                        // Save to local storage
                        saveToLocalStorage();
                        
                        // Update UI
                        updateWithdrawalsUI();
                    }
                    
                } catch (error) {
                    console.error('‚ùå Error loading withdrawals from Firebase:', error);
                }
            }
        }

        function updateTodaysEarnings() {
            const todayEarningsContainer = document.getElementById('today-earnings');
            if (!todayEarningsContainer) return;
            
            let todaysCoins = 0;
            
            // Calculate from visited sites
            visitedSites.forEach(siteIndex => {
                if (websites[siteIndex]) {
                    todaysCoins += websites[siteIndex].reward || 0;
                }
            });
            
            if (todaysCoins > 0) {
                todayEarningsContainer.innerHTML = `
                    <div class="flex justify-between items-center p-3 bg-white rounded-lg">
                        <div>
                            <p class="font-semibold">Today's Earnings</p>
                            <p class="text-sm text-gray-600">From ${visitedSites.length} websites</p>
                        </div>
                        <div class="text-right">
                            <p class="text-lg font-bold text-green-600">${todaysCoins} coins</p>
                        </div>
                    </div>
                `;
            } else {
                todayEarningsContainer.innerHTML = `
                    <div class="text-center py-8 text-gray-400">
                        <i class="fas fa-coins text-2xl mb-2"></i>
                        <p>No earnings today</p>
                    </div>
                `;
            }
        }

        // ===== REFERRAL SYSTEM =====
        function copyReferralLink() {
            const linkInput = document.getElementById('referral-link');
            if (!linkInput) return;
            
            linkInput.select();
            
            navigator.clipboard.writeText(linkInput.value)
                .then(() => showToast('Link copied!', 'success'))
                .catch(() => showToast('Failed to copy', 'error'));
        }

        function shareReferralLink() {
            const link = document.getElementById('referral-link')?.value;
            if (!link) return;
            
            if (tg.isVersionAtLeast('6.0')) {
                tg.shareUrl("Earn money visiting websites! Join Visit & Earn!", link);
            } else {
                window.open(link, '_blank');
            }
        }

        // ===== NAVIGATION =====
        function showSection(sectionId) {
            // Hide all sections
            document.querySelectorAll('.content-section').forEach(section => {
                section.classList.add('hidden');
            });
            
            // Remove active class from all nav items
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            
            // Show selected section
            const sectionElement = document.getElementById(`${sectionId}-section`);
            if (sectionElement) {
                sectionElement.classList.remove('hidden');
            }
            
            // Add active class to clicked nav item
            const activeButton = document.querySelector(`[onclick="showSection('${sectionId}')"]`);
            if (activeButton) activeButton.classList.add('active');
            
            // Update section title
            const titles = {
                'home': 'Visit & Earn',
                'websites': 'Earn Coins',
                'withdraw': 'Withdraw',
                'referral': 'Refer & Earn',
                'history': 'History'
            };
            
            const titleElement = document.getElementById('section-title');
            if (titleElement) {
                titleElement.textContent = titles[sectionId] || 'Visit & Earn';
            }
            
            // Load specific data for sections
            if (sectionId === 'withdraw' || sectionId === 'history') {
                loadUserWithdrawals();
                updateTodaysEarnings();
            }
            
            // Update Telegram back button
            updateBackButton();
        }

        function updateBackButton() {
            if (!tg?.BackButton) return;
            
            const currentSection = document.querySelector('.content-section:not(.hidden)')?.id.replace('-section', '') || 'home';
            
            if (currentSection === 'home') {
                tg.BackButton.hide();
            } else {
                tg.BackButton.show();
                tg.BackButton.onClick(() => {
                    if (!document.getElementById('visit-modal').classList.contains('hidden')) {
                        closeVisitModal();
                    } else if (!document.getElementById('withdrawal-modal').classList.contains('hidden')) {
                        closeWithdrawalModal();
                    } else if (!document.getElementById('withdrawal-confirmation').classList.contains('hidden')) {
                        document.getElementById('withdrawal-confirmation').classList.add('hidden');
                    } else {
                        showSection('home');
                    }
                });
            }
        }

        function showMainApp() {
            document.getElementById('loading-screen').classList.add('hidden');
            document.getElementById('main-app').classList.remove('hidden');
            showSection('home');
            
            // Update connection status in UI
            const connectionStatusEl = document.getElementById('connection-status');
            if (connectionStatusEl) {
                if (!firebaseConnected) {
                    connectionStatusEl.innerHTML = '<span class="text-yellow-500 text-xs"><i class="fas fa-exclamation-triangle mr-1"></i>Working offline</span>';
                } else {
                    connectionStatusEl.innerHTML = '<span class="text-green-500 text-xs"><i class="fas fa-check-circle mr-1"></i>Online</span>';
                }
            }
        }

        // ===== UTILITY FUNCTIONS =====
        function setupEventListeners() {
            // Withdrawal amount input
            const withdrawAmountInput = document.getElementById('withdraw-amount');
            if (withdrawAmountInput) {
                withdrawAmountInput.addEventListener('input', updateWithdrawalValue);
            }
            
            // Handle visibility change
            document.addEventListener('visibilitychange', () => {
                if (!document.hidden && currentTimer && timerSeconds > 0) {
                    console.log("üëÅÔ∏è User returned to app, timer continues");
                }
            });
            
            // Save data before unload
            window.addEventListener('beforeunload', () => {
                saveToLocalStorage();
                console.log("üíæ Data saved before unload");
            });
            
            // Handle online/offline status
            window.addEventListener('online', async () => {
                isOnline = true;
                console.log("üåê Online");
                showToast('Back online, syncing data...', 'success');
                updateConnectionStatus();
                
                // Check Firebase connection
                const connected = await checkFirebaseConnection();
                if (connected) {
                    showToast('Connected to server', 'success');
                    // Try to sync data
                    await syncLocalDataWithFirebase();
                }
            });
            
            window.addEventListener('offline', () => {
                isOnline = false;
                console.log("üåê Offline");
                showToast('Offline mode, using saved data', 'warning');
                updateConnectionStatus();
            });
        }

        async function syncLocalDataWithFirebase() {
            if (!userData?.uid || !firebaseConnected) return;
            
            try {
                console.log("üîÑ Syncing local data with Firebase...");
                
                // Get current Firebase data
                const userDoc = await getDoc(doc(db, "users", userData.uid));
                
                if (userDoc.exists()) {
                    const firebaseData = userDoc.data();
                    
                    // Merge balances (use higher value)
                    const firebaseBalance = firebaseData.balance || 0;
                    const localBalance = currentBalance;
                    
                    if (localBalance > firebaseBalance) {
                        // Update Firebase with local balance
                        await updateDoc(doc(db, "users", userData.uid), {
                            balance: localBalance,
                            totalEarned: totalEarned,
                            visitedSitesToday: visitedSites,
                            updatedAt: serverTimestamp()
                        });
                        console.log("‚úÖ Synced local data to Firebase");
                    } else if (firebaseBalance > localBalance) {
                        // Update local with Firebase balance
                        currentBalance = firebaseBalance;
                        totalEarned = firebaseData.totalEarned || totalEarned;
                        visitedSites = firebaseData.visitedSitesToday || visitedSites;
                        saveToLocalStorage();
                        updateUserUI();
                        loadWebsites();
                        console.log("‚úÖ Synced Firebase data to local");
                    }
                }
            } catch (error) {
                console.error("‚ùå Error syncing data:", error);
            }
        }

        function showLoading() {
            const loadingOverlay = document.getElementById('loading-overlay');
            if (loadingOverlay) {
                loadingOverlay.classList.remove('hidden');
            }
        }

        function hideLoading() {
            const loadingOverlay = document.getElementById('loading-overlay');
            if (loadingOverlay) {
                loadingOverlay.classList.add('hidden');
            }
        }

        function showToast(message, type = 'success') {
            const toast = document.getElementById('toast');
            const toastMessage = document.getElementById('toast-message');
            
            if (!toast || !toastMessage) return;
            
            toastMessage.textContent = message;
            toast.className = `toast ${type}`;
            toast.classList.add('show');
            
            setTimeout(() => toast.classList.remove('show'), 3000);
        }

        // Make functions globally available
        window.visitWebsite = visitWebsite;
        window.closeVisitModal = closeVisitModal;
        window.showWithdrawalModal = showWithdrawalModal;
        window.closeWithdrawalModal = closeWithdrawalModal;
        window.updateWithdrawalValue = updateWithdrawalValue;
        window.submitWithdrawal = submitWithdrawal;
        window.copyReferralLink = copyReferralLink;
        window.shareReferralLink = shareReferralLink;
        window.showSection = showSection;

        console.log("‚úÖ Visit & Earn App Ready with Complete Data Persistence");
    </script>
    
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #ffffff;
            min-height: 100vh;
        }
        
        .app-container {
            background: white;
            color: #1a1a1a;
            min-height: 100vh;
            border-radius: 24px 24px 0 0;
            overflow: hidden;
            position: relative;
        }
        
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px 16px;
            position: relative;
        }
        
        .user-avatar {
            width: 48px;
            height: 48px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            overflow: hidden;
        }
        
        .user-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .balance-card {
            background: white;
            color: #1a1a1a;
            border-radius: 16px;
            padding: 20px;
            margin-top: -30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            position: relative;
            z-index: 1;
        }
        
        .nav-bar {
            display: flex;
            justify-content: space-around;
            padding: 12px 0;
            background: white;
            border-top: 1px solid #e5e7eb;
            position: sticky;
            bottom: 0;
            left: 0;
            right: 0;
            z-index: 100;
        }
        
        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            color: #9ca3af;
            padding: 8px 12px;
            border-radius: 12px;
            transition: all 0.3s ease;
            cursor: pointer;
            background: none;
            border: none;
            outline: none;
            font-size: 14px;
        }
        
        .nav-item.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }
        
        .nav-item i {
            font-size: 18px;
            margin-bottom: 2px;
        }
        
        .nav-item span {
            font-size: 11px;
            font-weight: 600;
        }
        
        .website-card {
            background: white;
            border: 1px solid #e5e7eb;
            border-radius: 16px;
            padding: 16px;
            display: flex;
            align-items: center;
            margin-bottom: 12px;
            transition: all 0.3s ease;
        }
        
        .website-card:hover {
            border-color: #667eea;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.1);
        }
        
        .website-card.visited {
            opacity: 0.7;
            background: #f9fafb;
        }
        
        .website-icon {
            width: 48px;
            height: 48px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 20px;
            margin-right: 16px;
            flex-shrink: 0;
        }
        
        .website-info {
            flex: 1;
            min-width: 0;
        }
        
        .website-name {
            font-weight: 600;
            color: #1a1a1a;
            margin-bottom: 4px;
            font-size: 15px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .website-url {
            color: #6b7280;
            font-size: 12px;
            margin-bottom: 8px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .website-rewards {
            display: flex;
            gap: 12px;
        }
        
        .reward-amount, .timer {
            display: flex;
            align-items: center;
            gap: 4px;
            font-size: 12px;
            color: #667eea;
            font-weight: 500;
        }
        
        .btn-visit {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
            white-space: nowrap;
        }
        
        .btn-visit:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }
        
        .btn-visited {
            background: #10b981;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 8px;
            font-weight: 600;
            cursor: not-allowed;
            font-size: 14px;
            white-space: nowrap;
        }
        
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            padding: 16px;
        }
        
        .modal-content {
            background: white;
            border-radius: 24px;
            width: 100%;
            max-width: 400px;
            max-height: 90vh;
            overflow-y: auto;
            animation: slideUp 0.3s ease;
        }
        
        @keyframes slideUp {
            from {
                transform: translateY(50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }
        
        .timer-circle {
            width: 120px;
            height: 120px;
            border: 8px solid #e5e7eb;
            border-top-color: #667eea;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .withdrawal-method {
            display: flex;
            align-items: center;
            padding: 12px;
            border: 1px solid #e5e7eb;
            border-radius: 12px;
            margin-bottom: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .withdrawal-method:hover, .withdrawal-method.selected {
            border-color: #667eea;
            background: #f9fafb;
        }
        
        .method-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 18px;
            margin-right: 12px;
            flex-shrink: 0;
        }
        
        .method-info {
            flex: 1;
            min-width: 0;
        }
        
        .method-info h4 {
            font-weight: 600;
            color: #1a1a1a;
            margin-bottom: 2px;
            font-size: 14px;
        }
        
        .method-desc {
            color: #6b7280;
            font-size: 11px;
        }
        
        .status-badge {
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: 600;
            display: inline-block;
        }
        
        .status-badge.pending {
            background: #fef3c7;
            color: #92400e;
        }
        
        .status-badge.approved {
            background: #d1fae5;
            color: #065f46;
        }
        
        .status-badge.rejected {
            background: #fee2e2;
            color: #991b1b;
        }
        
        .toast {
            position: fixed;
            bottom: 80px;
            left: 50%;
            transform: translateX(-50%) translateY(100px);
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 12px 20px;
            border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
            z-index: 1001;
            transition: transform 0.3s ease;
            font-size: 14px;
            white-space: nowrap;
            max-width: 90%;
        }
        
        .toast.show {
            transform: translateX(-50%) translateY(0);
        }
        
        .toast.error {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
        }
        
        .toast.warning {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
        }
        
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
        }
        
        .loader {
            width: 50px;
            height: 50px;
            border: 4px solid #e5e7eb;
            border-top-color: #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .content-section {
            animation: fadeIn 0.3s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .no-websites {
            text-align: center;
            padding: 40px 20px;
        }
        
        .progress-bar {
            height: 6px;
            background: #e5e7eb;
            border-radius: 3px;
            overflow: hidden;
            margin: 16px 0;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 3px;
            transition: width 0.3s ease;
        }
        
        /* Radio button styling */
        input[type="radio"] {
            appearance: none;
            -webkit-appearance: none;
            border: 2px solid #e5e7eb;
            border-radius: 50%;
            width: 18px;
            height: 18px;
            cursor: pointer;
            position: relative;
            flex-shrink: 0;
        }
        
        input[type="radio"]:checked {
            border-color: #667eea;
            background-color: #667eea;
        }
        
        input[type="radio"]:checked::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background: white;
        }
        
        /* Input and button styling */
        input, textarea, button {
            font-family: 'Inter', sans-serif;
        }
        
        input:focus, textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        /* Connection status */
        .connection-status {
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 12px;
            padding: 2px 8px;
            border-radius: 12px;
            background: rgba(0, 0, 0, 0.2);
        }
        
        /* Responsive adjustments */
        @media (max-width: 380px) {
            .website-card {
                padding: 12px;
            }
            
            .website-icon {
                width: 40px;
                height: 40px;
                font-size: 18px;
                margin-right: 12px;
            }
            
            .btn-visit, .btn-visited {
                padding: 6px 12px;
                font-size: 12px;
            }
            
            .nav-item {
                padding: 6px 8px;
            }
            
            .nav-item i {
                font-size: 16px;
            }
            
            .nav-item span {
                font-size: 10px;
            }
        }
    </style>
</head>
<body>
    <!-- Toast Notification -->
    <div id="toast" class="toast hidden">
        <i class="fas fa-check-circle mr-2"></i>
        <span id="toast-message">Success!</span>
    </div>
    
    <!-- Loading Overlay -->
    <div id="loading-overlay" class="loading-overlay hidden">
        <div class="loader"></div>
        <div class="mt-4 text-gray-600 text-sm" id="connection-status"></div>
    </div>
    
    <!-- Loading Screen -->
    <div id="loading-screen" class="loading-overlay">
        <div class="text-center">
            <div class="loader mb-4"></div>
            <h2 class="text-xl font-bold mb-2 bg-gradient-to-r from-purple-600 to-blue-600 bg-clip-text text-transparent">Visit & Earn</h2>
            <p class="text-gray-600 text-sm mb-2">Loading your data...</p>
            <p class="text-xs text-gray-500" id="loading-status">Checking connection</p>
        </div>
    </div>
    
    <!-- Main App -->
    <div id="main-app" class="app-container hidden">
        <!-- Connection Status -->
        <div class="connection-status" id="connection-status">
            <i class="fas fa-wifi mr-1"></i>
            <span>Checking...</span>
        </div>
        
        <!-- Header -->
        <div class="header">
            <div class="flex justify-between items-center mb-6">
                <div>
                    <h1 id="section-title" class="text-xl font-bold">Visit & Earn</h1>
                    <p class="text-xs opacity-90">Earn coins visiting websites</p>
                </div>
                <div id="user-avatar" class="user-avatar">
                    <span>U</span>
                </div>
            </div>
            
            <!-- Balance Card -->
            <div class="balance-card">
                <div class="flex justify-between items-center mb-4">
                    <div>
                        <p class="text-xs text-gray-600">Available Balance</p>
                        <h2 class="text-2xl font-bold text-gray-900" id="user-balance">0</h2>
                        <p class="text-xs text-gray-600 mt-1" id="coins-value">1000 coins = ‚Çπ10</p>
                    </div>
                    <div class="text-right">
                        <p class="text-xs text-gray-600">Total Earned</p>
                        <p class="text-lg font-bold text-gray-900" id="total-earned">0</p>
                    </div>
                </div>
                
                <div class="flex gap-2">
                    <button onclick="showWithdrawalModal()" class="flex-1 bg-gradient-to-r from-purple-600 to-blue-600 text-white py-2 rounded-xl font-bold text-sm">
                        <i class="fas fa-wallet mr-1"></i>Withdraw
                    </button>
                    <button onclick="showSection('referral')" class="flex-1 border border-purple-600 text-purple-600 py-2 rounded-xl font-bold text-sm">
                        <i class="fas fa-share-alt mr-1"></i>Refer
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Main Content -->
        <div id="main-content" class="p-3 pb-20">
            <!-- Home Section -->
            <div id="home-section" class="content-section">
                <div class="mb-4">
                    <h3 class="text-md font-bold mb-3">Hello, <span id="user-name">User</span>! üëã</h3>
                    <p class="text-gray-600 text-sm mb-4">Visit websites and earn coins. Convert to real money!</p>
                    
                    <div class="bg-gradient-to-r from-purple-50 to-blue-50 border border-purple-100 rounded-xl p-3 mb-4">
                        <div class="flex justify-between items-center mb-1">
                            <span class="font-bold text-gray-900 text-sm">Daily Progress</span>
                            <span id="daily-progress" class="font-bold text-purple-600 text-sm">0/0</span>
                        </div>
                        <div class="progress-bar">
                            <div id="daily-progress-bar" class="progress-fill" style="width: 0%"></div>
                        </div>
                        <p class="text-xs text-gray-600 mt-1">Visit all websites daily</p>
                    </div>
                    
                    <div class="grid grid-cols-2 gap-3 mb-4">
                        <div class="bg-gray-50 rounded-xl p-3">
                            <div class="w-10 h-10 bg-gradient-to-r from-green-500 to-emerald-500 rounded-lg flex items-center justify-center mb-2">
                                <i class="fas fa-coins text-white"></i>
                            </div>
                            <p class="text-xs text-gray-600">Min Withdrawal</p>
                            <p class="text-md font-bold text-gray-900" id="min-withdrawal">1,000</p>
                        </div>
                        
                        <div class="bg-gray-50 rounded-xl p-3">
                            <div class="w-10 h-10 bg-gradient-to-r from-orange-500 to-red-500 rounded-lg flex items-center justify-center mb-2">
                                <i class="fas fa-gift text-white"></i>
                            </div>
                            <p class="text-xs text-gray-600">Referral Bonus</p>
                            <p class="text-md font-bold text-gray-900">100 coins</p>
                        </div>
                    </div>
                    
                    <button onclick="showSection('websites')" class="w-full bg-gradient-to-r from-purple-600 to-blue-600 text-white py-3 rounded-xl font-bold text-sm mb-3">
                        <i class="fas fa-play-circle mr-2"></i>Start Earning Now
                    </button>
                    
                    <button onclick="showSection('history')" class="w-full border border-gray-300 text-gray-700 py-3 rounded-xl font-bold text-sm">
                        <i class="fas fa-history mr-2"></i>View History
                    </button>
                </div>
            </div>
            
            <!-- Websites Section -->
            <div id="websites-section" class="content-section hidden">
                <div class="mb-4">
                    <div class="flex justify-between items-center mb-3">
                        <div>
                            <h3 class="text-md font-bold">Available Websites</h3>
                            <p class="text-gray-600 text-xs">Visit once daily to earn coins</p>
                        </div>
                        <div class="text-xs text-gray-500">
                            <span id="visited-count">0</span>/<span id="total-websites">0</span>
                        </div>
                    </div>
                    
                    <div id="websites-container">
                        <div class="no-websites">
                            <i class="fas fa-globe text-3xl text-gray-400 mb-3"></i>
                            <p class="text-gray-400 text-sm">Loading websites...</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Withdraw Section -->
            <div id="withdraw-section" class="content-section hidden">
                <div class="mb-4">
                    <h3 class="text-md font-bold mb-2">Withdraw Earnings</h3>
                    <p class="text-gray-600 text-sm mb-4">Convert coins to real money</p>
                    
                    <div class="bg-gradient-to-r from-green-50 to-emerald-50 border border-green-100 rounded-xl p-3 mb-4">
                        <div class="flex items-center mb-2">
                            <div class="w-8 h-8 bg-gradient-to-r from-green-500 to-emerald-500 rounded-lg flex items-center justify-center mr-2">
                                <i class="fas fa-wallet text-white text-sm"></i>
                            </div>
                            <div>
                                <p class="font-bold text-gray-900 text-sm">Available Balance</p>
                                <p class="text-lg font-bold text-gray-900" id="withdraw-balance">0 coins</p>
                            </div>
                        </div>
                        <p class="text-xs text-gray-600">Min: <span id="min-withdraw-amount">1,000</span> coins</p>
                    </div>
                    
                    <div class="bg-gray-50 rounded-xl p-3 mb-4">
                        <h4 class="font-bold text-sm mb-3">Withdrawal History</h4>
                        <div class="overflow-x-auto">
                            <table class="w-full min-w-full">
                                <thead>
                                    <tr class="text-left text-xs text-gray-600">
                                        <th class="pb-2 pr-2">Amount</th>
                                        <th class="pb-2 pr-2">Method</th>
                                        <th class="pb-2 pr-2">Status</th>
                                        <th class="pb-2">Date</th>
                                    </tr>
                                </thead>
                                <tbody id="withdrawals-list">
                                    <tr>
                                        <td colspan="4" class="text-center py-6 text-gray-400">
                                            <i class="fas fa-wallet text-xl mb-2"></i>
                                            <p class="text-sm">Loading...</p>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    
                    <button onclick="showWithdrawalModal()" class="w-full bg-gradient-to-r from-green-600 to-emerald-600 text-white py-3 rounded-xl font-bold text-sm">
                        <i class="fas fa-money-bill-wave mr-2"></i>Withdraw Now
                    </button>
                </div>
            </div>
            
            <!-- Referral Section -->
            <div id="referral-section" class="content-section hidden">
                <div class="mb-4">
                    <h3 class="text-md font-bold mb-2">Refer & Earn</h3>
                    <p class="text-gray-600 text-sm mb-4">Invite friends, earn bonus coins</p>
                    
                    <div class="bg-gradient-to-r from-purple-50 to-pink-50 border border-purple-100 rounded-xl p-3 mb-4">
                        <div class="flex items-center mb-3">
                            <div class="w-10 h-10 bg-gradient-to-r from-purple-600 to-pink-600 rounded-lg flex items-center justify-center mr-2">
                                <i class="fas fa-gift text-white"></i>
                            </div>
                            <div>
                                <p class="font-bold text-gray-900 text-sm">Earn 100 coins per referral</p>
                                <p class="text-xs text-gray-600">Friend gets 50 coins bonus!</p>
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <p class="text-xs text-gray-600 mb-1">Your Referral Link:</p>
                            <div class="flex">
                                <input type="text" id="referral-link" readonly 
                                       class="flex-1 border border-gray-300 rounded-l-lg p-2 text-xs">
                                <button onclick="copyReferralLink()" class="bg-gray-800 text-white px-3 rounded-r-lg">
                                    <i class="fas fa-copy text-sm"></i>
                                </button>
                            </div>
                        </div>
                        
                        <button onclick="shareReferralLink()" class="w-full bg-gradient-to-r from-purple-600 to-pink-600 text-white py-2 rounded-lg font-bold text-sm">
                            <i class="fas fa-share-alt mr-1"></i>Share Link
                        </button>
                    </div>
                    
                    <div class="grid grid-cols-2 gap-3 mb-4">
                        <div class="bg-gray-50 rounded-xl p-3">
                            <p class="text-xs text-gray-600">Total Referrals</p>
                            <p class="text-lg font-bold text-gray-900" id="total-referrals">0</p>
                        </div>
                        <div class="bg-gray-50 rounded-xl p-3">
                            <p class="text-xs text-gray-600">Referral Earnings</p>
                            <p class="text-lg font-bold text-gray-900" id="referral-earnings">0 coins</p>
                        </div>
                    </div>
                    
                    <div class="bg-yellow-50 border border-yellow-100 rounded-xl p-3">
                        <div class="flex">
                            <i class="fas fa-lightbulb text-yellow-500 mt-0.5 mr-2"></i>
                            <div>
                                <p class="font-bold text-gray-900 text-sm mb-1">Pro Tip</p>
                                <p class="text-xs text-gray-600">Share your link to maximize earnings!</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- History Section -->
            <div id="history-section" class="content-section hidden">
                <div class="mb-4">
                    <h3 class="text-md font-bold mb-2">Earning History</h3>
                    <p class="text-gray-600 text-sm mb-4">Track your earnings</p>
                    
                    <div class="space-y-3">
                        <div class="bg-gray-50 rounded-xl p-3">
                            <h4 class="font-bold text-sm mb-2">Today's Earnings</h4>
                            <div id="today-earnings">
                                <div class="text-center py-6 text-gray-400">
                                    <i class="fas fa-coins text-xl mb-2"></i>
                                    <p class="text-sm">Loading...</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-gray-50 rounded-xl p-3">
                            <h4 class="font-bold text-sm mb-2">Recent Withdrawals</h4>
                            <div id="recent-withdrawals">
                                <div class="text-center py-6 text-gray-400">
                                    <i class="fas fa-wallet text-xl mb-2"></i>
                                    <p class="text-sm">Loading...</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Navigation Bar -->
        <div class="nav-bar">
            <button onclick="showSection('home')" class="nav-item active">
                <i class="fas fa-home"></i>
                <span>Home</span>
            </button>
            <button onclick="showSection('websites')" class="nav-item">
                <i class="fas fa-globe"></i>
                <span>Earn</span>
            </button>
            <button onclick="showSection('withdraw')" class="nav-item">
                <i class="fas fa-wallet"></i>
                <span>Withdraw</span>
            </button>
            <button onclick="showSection('referral')" class="nav-item">
                <i class="fas fa-users"></i>
                <span>Refer</span>
            </button>
            <button onclick="showSection('history')" class="nav-item">
                <i class="fas fa-history"></i>
                <span>History</span>
            </button>
        </div>
    </div>
    
    <!-- Visit Website Modal -->
    <div id="visit-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <div class="p-4">
                <div id="visit-in-progress">
                    <div class="text-center mb-6">
                        <div class="timer-circle mb-4">
                            <span id="visit-timer" class="text-3xl font-bold">30</span>
                        </div>
                        <h3 class="text-xl font-bold mb-1" id="visit-website-name">Website</h3>
                        <p class="text-gray-600 text-sm" id="visit-website-url">website.com</p>
                    </div>
                    
                    <div class="mb-6">
                        <div class="flex justify-between mb-1">
                            <span class="text-sm text-gray-600">Progress</span>
                            <span class="text-sm font-bold" id="timer-percentage">0%</span>
                        </div>
                        <div class="progress-bar">
                            <div id="timer-progress" class="progress-fill" style="width: 0%"></div>
                        </div>
                    </div>
                    
                    <div class="bg-gradient-to-r from-blue-50 to-purple-50 border border-blue-100 rounded-xl p-3 mb-4">
                        <div class="flex justify-between items-center">
                            <div>
                                <p class="text-xs text-gray-600">You will earn</p>
                                <p class="text-xl font-bold text-gray-900" id="visit-reward">10 coins</p>
                            </div>
                            <div class="w-10 h-10 bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg flex items-center justify-center">
                                <i class="fas fa-coins text-white"></i>
                            </div>
                        </div>
                    </div>
                    
                    <p class="text-xs text-gray-600 text-center mb-4">
                        Website opened. Wait for timer to complete.
                    </p>
                    
                    <button onclick="closeVisitModal()" class="w-full border border-gray-300 text-gray-700 py-2 rounded-lg font-bold text-sm">
                        Cancel Visit
                    </button>
                </div>
                
                <div id="visit-success" class="hidden text-center">
                    <div class="w-16 h-16 bg-gradient-to-r from-green-500 to-emerald-500 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-check text-white text-2xl"></i>
                    </div>
                    <h3 class="text-xl font-bold mb-1">Visit Completed!</h3>
                    <p class="text-gray-600 text-sm mb-4">Coins added to balance</p>
                    <div class="bg-gradient-to-r from-green-50 to-emerald-50 border border-green-100 rounded-xl p-3 mb-4">
                        <p class="text-xs text-gray-600 mb-1">Earned</p>
                        <p class="text-2xl font-bold text-gray-900" id="earned-amount">10 coins</p>
                    </div>
                    <button onclick="closeVisitModal()" class="w-full bg-gradient-to-r from-green-600 to-emerald-600 text-white py-2 rounded-lg font-bold text-sm">
                        Continue Earning
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Withdrawal Modal -->
    <div id="withdrawal-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <div class="p-4">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-xl font-bold">Withdraw Coins</h3>
                    <button onclick="closeWithdrawalModal()" class="text-gray-400 hover:text-gray-600">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                
                <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-700 mb-1">Amount (coins)</label>
                    <div class="relative">
                        <input type="number" id="withdraw-amount" min="1000" 
                               class="w-full border border-gray-300 rounded-lg p-3 text-md font-bold" 
                               placeholder="1000">
                        <div class="absolute right-2 top-1/2 transform -translate-y-1/2 text-xs text-gray-600">
                            Max: <span id="withdraw-max">0</span>
                        </div>
                    </div>
                    <p class="text-xs text-gray-500 mt-1">Min: <span id="min-withdraw-modal">1,000</span> coins</p>
                </div>
                
                <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-700 mb-1">Payment Method</label>
                    <div id="withdrawal-methods">
                        <!-- Methods loaded here -->
                    </div>
                </div>
                
                <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-700 mb-1">Payment Details</label>
                    <textarea id="payment-details" rows="2" 
                              class="w-full border border-gray-300 rounded-lg p-3 text-sm"
                              placeholder="Account number, UPI ID, etc."></textarea>
                    <p class="text-xs text-gray-500 mt-1">Enter exact payment details</p>
                </div>
                
                <div class="bg-gradient-to-r from-blue-50 to-purple-50 border border-blue-100 rounded-xl p-3 mb-4">
                    <p class="text-xs text-gray-600 mb-1">Estimated Value</p>
                    <p class="text-xl font-bold text-gray-900" id="estimated-value">‚Çπ0.00</p>
                    <p class="text-xs text-gray-500 mt-1">Current conversion rate</p>
                </div>
                
                <button onclick="submitWithdrawal()" class="w-full bg-gradient-to-r from-green-600 to-emerald-600 text-white py-3 rounded-lg font-bold text-sm">
                    <i class="fas fa-paper-plane mr-2"></i>Submit Request
                </button>
            </div>
        </div>
    </div>
    
    <!-- Withdrawal Confirmation -->
    <div id="withdrawal-confirmation" class="modal-overlay hidden">
        <div class="modal-content">
            <div class="p-4 text-center">
                <div class="w-16 h-16 bg-gradient-to-r from-green-500 to-emerald-500 rounded-full flex items-center justify-center mx-auto mb-4">
                    <i class="fas fa-check text-white text-2xl"></i>
                </div>
                <h3 class="text-xl font-bold mb-1">Request Submitted!</h3>
                <p class="text-gray-600 text-sm mb-4">Withdrawal request received</p>
                
                <div class="bg-gradient-to-r from-green-50 to-emerald-50 border border-green-100 rounded-xl p-3 mb-4">
                    <p class="text-xs text-gray-600 mb-1">Amount</p>
                    <p class="text-2xl font-bold text-gray-900" id="confirmation-amount">0 coins</p>
                    <p class="text-xs text-gray-600 mt-2">Method: <span id="confirmation-method" class="font-bold">BKASH</span></p>
                </div>
                
                <p class="text-xs text-gray-600 mb-4">
                    Processed within 24-48 hours. You'll be notified when completed.
                </p>
                
                <button onclick="document.getElementById('withdrawal-confirmation').classList.add('hidden')" 
                        class="w-full bg-gradient-to-r from-green-600 to-emerald-600 text-white py-2 rounded-lg font-bold text-sm">
                    Done
                </button>
            </div>
        </div>
    </div>
</body>
</html>
